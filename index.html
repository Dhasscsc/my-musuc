<!DOCTYPE html>
<html lang="ta">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ЁЯО╡ рокро╛роЯро▓рпН роирпВро▓роХроорпН - роЙрогрпНроорпИропро╛рой рокро╛роЯро▓рпНроХро│рпБроЯройрпН</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --accent: #f72585;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .media-card {
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.3s;
            border: none;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            height: 100%;
        }
        
        .media-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .media-thumbnail {
            height: 150px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }
        
        .player-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 15px;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
            z-index: 1000;
        }
        
        .btn-primary {
            background: var(--primary);
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
        }
        
        .btn-primary:hover {
            background: var(--secondary);
        }
        
        .tag {
            display: inline-block;
            background: #e9ecef;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin: 2px;
        }
        
        .link-item {
            padding: 10px;
            border-radius: 8px;
            background: #f8f9fa;
            margin-bottom: 10px;
            border-left: 4px solid var(--primary);
        }
        
        .waveform {
            width: 100%;
            height: 60px;
            background: #f8f9fa;
            border-radius: 5px;
            margin: 10px 0;
            position: relative;
            overflow: hidden;
        }
        
        @media (max-width: 768px) {
            .media-thumbnail {
                height: 100px;
            }
        }
    </style>
</head>
<body>
    <div class="container py-4">
        <!-- Header -->
        <div class="text-center mb-5">
            <h1 class="text-white mb-3">ЁЯО╡ рокро╛роЯро▓рпН роирпВро▓роХроорпН</h1>
            <p class="text-white-50">роЙроЩрпНроХро│рпБроХрпНроХрпБрокрпН рокро┐роЯро┐родрпНрод рокро╛роЯро▓рпНроХро│рпИроЪрпН роЪрпЗроХро░ро┐родрпНродрпБ роХрпЗро│рпБроЩрпНроХро│рпН</p>
        </div>
        
        <!-- Main Content -->
        <div class="row">
            <div class="col-lg-8">
                <!-- Step 1: Add Songs -->
                <div class="glass-card">
                    <h3><i class="fas fa-plus-circle me-2"></i>рокро╛роЯро▓рпНроХро│рпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН</h3>
                    
                    <div class="row g-4 mt-3">
                        <!-- Method 1: YouTube URL -->
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">ЁЯОм YouTube роЗро▓ро┐ро░рпБроирпНродрпБ</h5>
                                    <div class="mb-3">
                                        <label class="form-label">YouTube Video URL</label>
                                        <input type="url" class="form-control" id="youtubeUrl" 
                                               placeholder="https://youtube.com/watch?v=..." 
                                               value="https://www.youtube.com/watch?v=dQw4w9WgXcQ">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">рокро╛роЯро▓рпН рокрпЖропро░рпН</label>
                                        <input type="text" class="form-control" id="youtubeTitle" 
                                               placeholder="Never Gonna Give You Up">
                                    </div>
                                    <button class="btn btn-primary w-100" onclick="addYouTubeSong()">
                                        <i class="fab fa-youtube me-2"></i>роЪрпЗро░рпНроХрпНроХро╡рпБроорпН
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Method 2: Direct MP3 Link -->
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">ЁЯО╡ MP3 ро▓ро┐роЩрпНроХрпН</h5>
                                    <div class="mb-3">
                                        <label class="form-label">MP3 File URL</label>
                                        <input type="url" class="form-control" id="mp3Url" 
                                               placeholder="https://example.com/song.mp3" 
                                               value="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">рокро╛роЯро▓рпН рокрпЖропро░рпН</label>
                                        <input type="text" class="form-control" id="mp3Title" 
                                               placeholder="SoundHelix Song 1">
                                    </div>
                                    <button class="btn btn-success w-100" onclick="addMP3Song()">
                                        <i class="fas fa-music me-2"></i>роЪрпЗро░рпНроХрпНроХро╡рпБроорпН
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Method 3: Sample Songs -->
                        <div class="col-12 mt-3">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">тЬи рооро╛родро┐ро░ро┐ рокро╛роЯро▓рпНроХро│рпН (роЙроЯройроЯро┐ропро╛роХ рокропройрпНрокроЯрпБродрпНрод)</h5>
                                    <div class="row g-2">
                                        <div class="col-md-3 col-6">
                                            <button class="btn btn-outline-primary w-100" onclick="addSampleSong(1)">
                                                SoundHelix 1
                                            </button>
                                        </div>
                                        <div class="col-md-3 col-6">
                                            <button class="btn btn-outline-primary w-100" onclick="addSampleSong(2)">
                                                SoundHelix 2
                                            </button>
                                        </div>
                                        <div class="col-md-3 col-6">
                                            <button class="btn btn-outline-primary w-100" onclick="addSampleSong(3)">
                                                SoundHelix 3
                                            </button>
                                        </div>
                                        <div class="col-md-3 col-6">
                                            <button class="btn btn-outline-primary w-100" onclick="addSampleSong('mixkit')">
                                                Mixkit Music
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Step 2: Music Library -->
                <div class="glass-card">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h3><i class="fas fa-music me-2"></i>роОройродрпБ рокро╛роЯро▓рпН роирпВро▓роХроорпН</h3>
                        <span class="badge bg-primary fs-6" id="songCount">0 рокро╛роЯро▓рпНроХро│рпН</span>
                    </div>
                    
                    <div class="row" id="musicLibrary">
                        <!-- Songs will appear here -->
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <!-- Player & Controls -->
                <div class="glass-card">
                    <h3><i class="fas fa-play-circle me-2"></i>роЗроЪрпИрокрпН рокрпНро│рпЗропро░рпН</h3>
                    
                    <div class="text-center my-4">
                        <div class="media-thumbnail mb-3" id="currentThumbnail">
                            <i class="fas fa-music"></i>
                        </div>
                        <h4 id="currentSongTitle">рокро╛роЯро▓рпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ</h4>
                        <p class="text-muted" id="currentSongArtist">-</p>
                    </div>
                    
                    <!-- Progress -->
                    <div class="mb-3">
                        <div class="d-flex justify-content-between small mb-1">
                            <span id="currentTime">0:00</span>
                            <span id="totalTime">0:00</span>
                        </div>
                        <div class="progress" style="height: 6px; cursor: pointer;" onclick="seekAudio(event)">
                            <div class="progress-bar" id="progressBar" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <!-- Controls -->
                    <div class="d-flex justify-content-center align-items-center mb-4">
                        <button class="btn btn-link text-dark fs-3" onclick="skipBackward()">
                            <i class="fas fa-step-backward"></i>
                        </button>
                        <button class="btn btn-primary btn-lg mx-4 rounded-circle p-3" onclick="togglePlay()" id="playBtn">
                            <i class="fas fa-play fs-4"></i>
                        </button>
                        <button class="btn btn-link text-dark fs-3" onclick="skipForward()">
                            <i class="fas fa-step-forward"></i>
                        </button>
                    </div>
                    
                    <!-- Volume -->
                    <div class="d-flex align-items-center">
                        <i class="fas fa-volume-down me-2"></i>
                        <input type="range" class="form-range" id="volumeSlider" min="0" max="100" value="70" 
                               oninput="changeVolume(this.value)">
                        <i class="fas fa-volume-up ms-2"></i>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="row g-2 mt-4">
                        <div class="col-6">
                            <button class="btn btn-outline-primary w-100" onclick="shufflePlay()">
                                <i class="fas fa-random me-1"></i> роХро▓роХрпНроХрпБ
                            </button>
                        </div>
                        <div class="col-6">
                            <button class="btn btn-outline-primary w-100" onclick="repeatToggle()">
                                <i class="fas fa-redo me-1"></i> роорпАрогрпНроЯрпБроорпН
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Alarm Setup -->
                <div class="glass-card">
                    <h3><i class="fas fa-clock me-2"></i>роЕро▓ро╛ро░роорпН роЕроорпИроХрпНроХ</h3>
                    
                    <div class="mb-3">
                        <label class="form-label">роЕро▓ро╛ро░роорпН роирпЗро░роорпН</label>
                        <input type="time" class="form-control" id="alarmTime" value="07:00">
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">рокро╛роЯро▓рпН родрпЗро░рпНро╡рпБ</label>
                        <select class="form-select" id="alarmSong">
                            <option value="">рокро╛роЯро▓рпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН</option>
                        </select>
                    </div>
                    
                    <div class="mb-3">
                        <label class="form-label">роЕроЯрпНроЯро╡рогрпИ</label>
                        <select class="form-select" id="alarmSchedule">
                            <option value="daily">родро┐ройроЪро░ро┐</option>
                            <option value="weekdays">родро┐роЩрпНроХро│рпН-ро╡рпЖро│рпНро│ро┐</option>
                            <option value="once">роТро░рпБ роорпБро▒рпИ роороЯрпНроЯрпБроорпН</option>
                        </select>
                    </div>
                    
                    <button class="btn btn-primary w-100" onclick="setAlarm()">
                        <i class="fas fa-bell me-2"></i>роЕро▓ро╛ро░роорпН роЕроорпИроХрпНроХ
                    </button>
                    
                    <div class="mt-3" id="alarmsList">
                        <!-- Alarms will appear here -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Instructions -->
        <div class="glass-card mt-4">
            <h4><i class="fas fa-info-circle me-2"></i>рокропройрпНрокро╛роЯрпНроЯрпБ ро╡ро┤ро┐роорпБро▒рпИроХро│рпН</h4>
            <div class="row g-3">
                <div class="col-md-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">1. рокро╛роЯро▓рпНроХро│рпИроЪрпН роЪрпЗро░рпНроХрпНроХ</h5>
                            <ul class="small">
                                <li>YouTube URL роР роТроЯрпНроЯро╡рпБроорпН</li>
                                <li>роЕро▓рпНро▓родрпБ MP3 ро▓ро┐роЩрпНроХрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН</li>
                                <li>рооро╛родро┐ро░ро┐ рокро╛роЯро▓рпНроХро│рпИ роХро┐ро│ро┐роХрпН роЪрпЖропрпНропро╡рпБроорпН</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">2. роЗроЪрпИроХрпНроХро╡рпБроорпН</h5>
                            <ul class="small">
                                <li>рокро╛роЯро▓рпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН</li>
                                <li>рокрпНро│рпЗ рокрпКродрпНродро╛ройрпИ роЕро┤рпБродрпНродро╡рпБроорпН</li>
                                <li>ро╡ро╛ро▓рпНропрпВроорпН рооро▒рпНро▒рпБроорпН рокрпНро░рпЛроХро┐ро░ро╕рпН роХроЯрпНроЯрпБрокрпНрокроЯрпБродрпНродро╡рпБроорпН</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card h-100">
                        <div class="card-body">
                            <h5 class="card-title">3. роЕро▓ро╛ро░роорпН роЕроорпИроХрпНроХ</h5>
                            <ul class="small">
                                <li>роирпЗро░родрпНродрпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН</li>
                                <li>рокро╛роЯро▓рпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН</li>
                                <li>роЕро▓ро╛ро░родрпНродрпИроЪрпН роЪрпЗрооро┐роХрпНроХро╡рпБроорпН</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Hidden Audio Player -->
    <audio id="audioPlayer" ontimeupdate="updateProgress()" onended="nextSong()"></audio>
    
    <!-- Templates -->
    <template id="songCardTemplate">
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card media-card h-100">
                <div class="media-thumbnail" style="background: linear-gradient(45deg, {color1}, {color2});">
                    <i class="fas fa-music"></i>
                </div>
                <div class="card-body">
                    <h5 class="card-title">{title}</h5>
                    <p class="card-text text-muted small">{type}</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <button class="btn btn-sm btn-primary" onclick="playSong('{id}')">
                            <i class="fas fa-play me-1"></i> роЗроЪрпИроХрпНроХ
                        </button>
                        <button class="btn btn-sm btn-outline-secondary" onclick="setAsAlarm('{id}')">
                            <i class="fas fa-clock"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-danger" onclick="deleteSong('{id}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </template>
    
    <template id="alarmItemTemplate">
        <div class="alert alert-light d-flex justify-content-between align-items-center">
            <div>
                <i class="fas fa-bell text-primary me-2"></i>
                <strong>{time}</strong> - {song}
            </div>
            <button class="btn btn-sm btn-outline-danger" onclick="deleteAlarm('{id}')">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </template>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // ==================== GLOBAL VARIABLES ====================
        let songs = JSON.parse(localStorage.getItem('musicLibrary')) || [];
        let alarms = JSON.parse(localStorage.getItem('musicAlarms')) || [];
        let currentSongIndex = -1;
        let isPlaying = false;
        let isShuffle = false;
        let isRepeat = false;
        
        // ==================== SAMPLE SONGS ====================
        const sampleSongs = [
            {
                id: '1',
                title: 'SoundHelix Song 1',
                type: 'MP3',
                url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3',
                color1: '#4361ee',
                color2: '#3a0ca3'
            },
            {
                id: '2',
                title: 'SoundHelix Song 2',
                type: 'MP3',
                url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3',
                color1: '#f72585',
                color2: '#b5179e'
            },
            {
                id: '3',
                title: 'SoundHelix Song 3',
                type: 'MP3',
                url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3',
                color1: '#4cc9f0',
                color2: '#4895ef'
            },
            {
                id: '4',
                title: 'Mixkit Tech House',
                type: 'MP3',
                url: 'https://assets.mixkit.co/music/preview/mixkit-tech-house-vibes-130.mp3',
                color1: '#7209b7',
                color2: '#560bad'
            },
            {
                id: '5',
                title: 'Mixkit Driving',
                type: 'MP3',
                url: 'https://assets.mixkit.co/music/preview/mixkit-driving-ambition-32.mp3',
                color1: '#f3722c',
                color2: '#f8961e'
            }
        ];
        
        // ==================== INITIALIZE ====================
        document.addEventListener('DOMContentLoaded', function() {
            // Load sample songs if empty
            if (songs.length === 0) {
                songs = [...sampleSongs];
                saveSongs();
            }
            
            // Update UI
            updateLibrary();
            updateAlarmDropdown();
            updateAlarmsList();
            updateSongCount();
            
            // Check for active alarms
            checkAlarms();
            
            // Auto-save every minute
            setInterval(saveSongs, 60000);
        });
        
        // ==================== SONG MANAGEMENT ====================
        function addYouTubeSong() {
            const url = document.getElementById('youtubeUrl').value;
            const title = document.getElementById('youtubeTitle').value || 'YouTube Song';
            
            if (!url.includes('youtube.com') && !url.includes('youtu.be')) {
                alert('роЪро░ро┐ропро╛рой YouTube URL роР роЙро│рпНро│ро┐роЯро╡рпБроорпН');
                return;
            }
            
            const newSong = {
                id: Date.now().toString(),
                title: title,
                type: 'YouTube',
                url: url,
                color1: getRandomColor(),
                color2: getRandomColor()
            };
            
            songs.push(newSong);
            saveSongs();
            updateLibrary();
            
            alert('YouTube рокро╛роЯро▓рпН роЪрпЗро░рпНроХрпНроХрокрпНрокроЯрпНроЯродрпБ!');
            document.getElementById('youtubeUrl').value = '';
            document.getElementById('youtubeTitle').value = '';
        }
        
        function addMP3Song() {
            const url = document.getElementById('mp3Url').value;
            const title = document.getElementById('mp3Title').value || 'MP3 Song';
            
            if (!url.endsWith('.mp3')) {
                alert('роЪро░ро┐ропро╛рой MP3 URL роР роЙро│рпНро│ро┐роЯро╡рпБроорпН (.mp3)');
                return;
            }
            
            const newSong = {
                id: Date.now().toString(),
                title: title,
                type: 'MP3',
                url: url,
                color1: getRandomColor(),
                color2: getRandomColor()
            };
            
            songs.push(newSong);
            saveSongs();
            updateLibrary();
            
            alert('MP3 рокро╛роЯро▓рпН роЪрпЗро░рпНроХрпНроХрокрпНрокроЯрпНроЯродрпБ!');
            document.getElementById('mp3Url').value = '';
            document.getElementById('mp3Title').value = '';
        }
        
        function addSampleSong(type) {
            let song;
            
            if (type === 'mixkit') {
                song = {
                    id: Date.now().toString(),
                    title: 'Mixkit Music',
                    type: 'MP3',
                    url: 'https://assets.mixkit.co/music/preview/mixkit-tech-house-vibes-130.mp3',
                    color1: '#7209b7',
                    color2: '#560bad'
                };
            } else {
                song = {...sampleSongs[type - 1]};
                song.id = Date.now().toString();
            }
            
            songs.push(song);
            saveSongs();
            updateLibrary();
            
            alert('рооро╛родро┐ро░ро┐ рокро╛роЯро▓рпН роЪрпЗро░рпНроХрпНроХрокрпНрокроЯрпНроЯродрпБ!');
        }
        
        function deleteSong(id) {
            if (confirm('роЗроирпНрод рокро╛роЯро▓рпИ роирпАроХрпНроХ ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпАро░рпНроХро│ро╛?')) {
                songs = songs.filter(song => song.id !== id);
                saveSongs();
                updateLibrary();
                updateAlarmDropdown();
            }
        }
        
        // ==================== PLAYER FUNCTIONS ====================
        function playSong(id) {
            const songIndex = songs.findIndex(song => song.id === id);
            if (songIndex === -1) return;
            
            currentSongIndex = songIndex;
            const song = songs[songIndex];
            const player = document.getElementById('audioPlayer');
            
            // Update UI
            document.getElementById('currentSongTitle').textContent = song.title;
            document.getElementById('currentSongArtist').textContent = song.type;
            document.getElementById('currentThumbnail').style.background = 
                `linear-gradient(45deg, ${song.color1}, ${song.color2})`;
            
            // Play the song
            player.src = song.url;
            player.play();
            isPlaying = true;
            
            // Update play button
            document.getElementById('playBtn').innerHTML = '<i class="fas fa-pause fs-4"></i>';
            
            // Increment play count (optional)
            if (!song.playCount) song.playCount = 0;
            song.playCount++;
            saveSongs();
        }
        
        function togglePlay() {
            const player = document.getElementById('audioPlayer');
            const playBtn = document.getElementById('playBtn');
            
            if (player.src && player.src !== '') {
                if (isPlaying) {
                    player.pause();
                    playBtn.innerHTML = '<i class="fas fa-play fs-4"></i>';
                } else {
                    player.play();
                    playBtn.innerHTML = '<i class="fas fa-pause fs-4"></i>';
                }
                isPlaying = !isPlaying;
            } else {
                // If no song is loaded, play first song
                if (songs.length > 0) {
                    playSong(songs[0].id);
                }
            }
        }
        
        function nextSong() {
            if (songs.length === 0) return;
            
            if (isShuffle) {
                // Play random song
                currentSongIndex = Math.floor(Math.random() * songs.length);
            } else {
                // Play next song
                currentSongIndex = (currentSongIndex + 1) % songs.length;
            }
            
            playSong(songs[currentSongIndex].id);
        }
        
        function skipBackward() {
            const player = document.getElementById('audioPlayer');
            player.currentTime = Math.max(0, player.currentTime - 10);
        }
        
        function skipForward() {
            const player = document.getElementById('audioPlayer');
            player.currentTime = Math.min(player.duration, player.currentTime + 10);
        }
        
        function updateProgress() {
            const player = document.getElementById('audioPlayer');
            const progressBar = document.getElementById('progressBar');
            const currentTime = document.getElementById('currentTime');
            const totalTime = document.getElementById('totalTime');
            
            if (player.duration) {
                const percent = (player.currentTime / player.duration) * 100;
                progressBar.style.width = percent + '%';
                
                currentTime.textContent = formatTime(player.currentTime);
                totalTime.textContent = formatTime(player.duration);
            }
        }
        
        function seekAudio(event) {
            const player = document.getElementById('audioPlayer');
            const progressBar = event.currentTarget;
            const rect = progressBar.getBoundingClientRect();
            const pos = (event.clientX - rect.left) / rect.width;
            
            player.currentTime = pos * player.duration;
            progressBar.children[0].style.width = (pos * 100) + '%';
        }
        
        function changeVolume(value) {
            document.getElementById('audioPlayer').volume = value / 100;
        }
        
        function shufflePlay() {
            isShuffle = !isShuffle;
            alert(isShuffle ? 'роХро▓роХрпНроХрпБ роорпБро▒рпИ роЗропроХрпНроХрокрпНрокроЯрпНроЯродрпБ' : 'роХро▓роХрпНроХрпБ роорпБро▒рпИ роорпБроЯроХрпНроХрокрпНрокроЯрпНроЯродрпБ');
        }
        
        function repeatToggle() {
            isRepeat = !isRepeat;
            document.getElementById('audioPlayer').loop = isRepeat;
            alert(isRepeat ? 'роорпАрогрпНроЯрпБроорпН роорпБро▒рпИ роЗропроХрпНроХрокрпНрокроЯрпНроЯродрпБ' : 'роорпАрогрпНроЯрпБроорпН роорпБро▒рпИ роорпБроЯроХрпНроХрокрпНрокроЯрпНроЯродрпБ');
        }
        
        // ==================== ALARM FUNCTIONS ====================
        function setAlarm() {
            const time = document.getElementById('alarmTime').value;
            const songId = document.getElementById('alarmSong').value;
            const schedule = document.getElementById('alarmSchedule').value;
            
            if (!time || !songId) {
                alert('роирпЗро░роорпН рооро▒рпНро▒рпБроорпН рокро╛роЯро▓рпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН');
                return;
            }
            
            const song = songs.find(s => s.id === songId);
            if (!song) {
                alert('рокро╛роЯро▓рпН роХро┐роЯрпИроХрпНроХро╡ро┐ро▓рпНро▓рпИ');
                return;
            }
            
            const alarm = {
                id: Date.now().toString(),
                time: time,
                songId: songId,
                songTitle: song.title,
                schedule: schedule,
                active: true
            };
            
            alarms.push(alarm);
            saveAlarms();
            updateAlarmsList();
            
            alert(`роЕро▓ро╛ро░роорпН роЕроорпИроХрпНроХрокрпНрокроЯрпНроЯродрпБ: ${time} (${song.title})`);
        }
        
        function deleteAlarm(id) {
            alarms = alarms.filter(alarm => alarm.id !== id);
            saveAlarms();
            updateAlarmsList();
        }
        
        function setAsAlarm(songId) {
            document.getElementById('alarmSong').value = songId;
            document.getElementById('alarmTime').focus();
        }
        
        function checkAlarms() {
            const now = new Date();
            const currentTime = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
            
            alarms.forEach(alarm => {
                if (alarm.active && alarm.time === currentTime) {
                    // Play alarm song
                    const song = songs.find(s => s.id === alarm.songId);
                    if (song) {
                        playSong(song.id);
                        alert(`роЕро▓ро╛ро░роорпН: ${alarm.songTitle}`);
                        
                        // Deactivate if it's a one-time alarm
                        if (alarm.schedule === 'once') {
                            alarm.active = false;
                            saveAlarms();
                            updateAlarmsList();
                        }
                    }
                }
            });
        }
        
        // ==================== UI UPDATE FUNCTIONS ====================
        function updateLibrary() {
            const container = document.getElementById('musicLibrary');
            container.innerHTML = '';
            
            songs.forEach(song => {
                const template = document.getElementById('songCardTemplate').innerHTML;
                const html = template
                    .replace(/{id}/g, song.id)
                    .replace(/{title}/g, song.title)
                    .replace(/{type}/g, song.type)
                    .replace(/{color1}/g, song.color1 || '#4361ee')
                    .replace(/{color2}/g, song.color2 || '#3a0ca3');
                
                container.innerHTML += html;
            });
        }
        
        function updateAlarmDropdown() {
            const select = document.getElementById('alarmSong');
            select.innerHTML = '<option value="">рокро╛роЯро▓рпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН</option>';
            
            songs.forEach(song => {
                const option = document.createElement('option');
                option.value = song.id;
                option.textContent = `${song.title} (${song.type})`;
                select.appendChild(option);
            });
        }
        
        function updateAlarmsList() {
            const container = document.getElementById('alarmsList');
            container.innerHTML = '';
            
            const activeAlarms = alarms.filter(a => a.active);
            
            if (activeAlarms.length === 0) {
                container.innerHTML = '<p class="text-muted text-center">роЕро▓ро╛ро░роЩрпНроХро│рпН роЗро▓рпНро▓рпИ</p>';
                return;
            }
            
            activeAlarms.forEach(alarm => {
                const template = document.getElementById('alarmItemTemplate').innerHTML;
                const html = template
                    .replace(/{id}/g, alarm.id)
                    .replace(/{time}/g, alarm.time)
                    .replace(/{song}/g, alarm.songTitle);
                
                container.innerHTML += html;
            });
        }
        
        function updateSongCount() {
            document.getElementById('songCount').textContent = `${songs.length} рокро╛роЯро▓рпНроХро│рпН`;
        }
        
        // ==================== HELPER FUNCTIONS ====================
        function getRandomColor() {
            const colors = [
                '#4361ee', '#3a0ca3', '#f72585', '#4cc9f0', 
                '#7209b7', '#560bad', '#f3722c', '#f8961e'
            ];
            return colors[Math.floor(Math.random() * colors.length)];
        }
        
        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }
        
        function saveSongs() {
            localStorage.setItem('musicLibrary', JSON.stringify(songs));
        }
        
        function saveAlarms() {
            localStorage.setItem('musicAlarms', JSON.stringify(alarms));
        }
        
        // Check alarms every minute
        setInterval(checkAlarms, 60000);
        
        // Auto-check alarms on page load
        checkAlarms();
    </script>
</body>
</html>